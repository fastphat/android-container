sudo: required

arch: amd64
os: linux

language: bash

services:
  - docker

install:
  - git clone https://github.com/fastphat/android-container.git  && cd android-container

script:
  - docker build -q -t android-container:sunflower .
  - git clone https://github.com/android/sunflower && cd sunflower
  - while sleep 5m; do echo "=====[ $SECONDS seconds, buildroot still building... ]====="; done &
  - docker run --privileged -it --rm -v $PWD:/data -v gradle-cache:/cache android-container:sunflower bash -c '. /start.sh && /data/gradlew test connectedAndroidTest -p /data'
  - kill %1